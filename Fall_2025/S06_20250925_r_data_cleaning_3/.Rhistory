mutate(year = as.numeric(substr(year, 2, 5)))
population_data_wide <- population_data_long %>%
pivot_wider(names_from = year, values_from = population)
gdp_capita_data_wide <- gdp_capita_data_long %>%
pivot_wider(names_from = year, values_from = gdp_capita)
##################
# Combining data
##################
df_animals <- data.frame(numbers = c(1, 2, 3, 4), letters = c("a", "b", "c", "d"), animals = c("dog", "cat", "bird", "ape"))
df_colors <- data.frame(numbers = c(4, 5, 6, 7), letters = c("c", "d", "e", "f"), colors = c("black", "red", "blue", "green"))
## Row bind, column bind, bind rows, bind columns
df_animals_colors <- rbind(df_animals, df_colors)
# Load data
culture_data <- read_csv("data/culture.csv") %>% clean_names()
wvs_regions_data <- read_csv("data/wvs_regions.csv") %>% clean_names()
co2_data <- read_csv("data/owid_co2_data.csv") %>% clean_names()
pew_climate_data <- read_csv("data/pew_climate.csv") %>% clean_names()
population_data <- read_csv("data/population_nd_gain.csv") %>% clean_names()
vulnerability_data <- read_csv("data/vulnerability_nd_gain.csv") %>% clean_names()
gdp_capita_data <- read_csv("data/gdp_nd_gain.csv") %>% clean_names()
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
#########################
# Wide versus long data
#########################
## Population data
head(population_data)
head(gdp_capita_data)
population_data_long <- population_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "population") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
gdp_capita_data_long <- gdp_capita_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "gdp_capita") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
population_data_wide <- population_data_long %>%
pivot_wider(names_from = year, values_from = population)
gdp_capita_data_wide <- gdp_capita_data_long %>%
pivot_wider(names_from = year, values_from = gdp_capita)
##################
# Combining data
##################
df_animals <- data.frame(numbers = c(1, 2, 3, 4), letters = c("a", "b", "c", "d"), animals = c("dog", "cat", "bird", "ape"))
df_colors <- data.frame(numbers = c(4, 5, 6, 7), letters = c("c", "d", "e", "f"), colors = c("black", "red", "blue", "green"))
## Row bind, column bind, bind rows, bind columns
df_animals_colors <- rbind(df_animals, df_colors)
View(nd_gain_vulnerability)
culture <- read_csv("data/culture.csv")
economics <- read_csv("data/economics.csv")
# Load data
culture_data <- read_csv("data/culture.csv") %>% clean_names()
wvs_regions_data <- read_csv("data/wvs_regions.csv") %>% clean_names()
co2_data <- read_csv("data/owid_co2_data.csv") %>% clean_names()
pew_climate_data <- read_csv("data/pew_climate.csv") %>% clean_names()
population_data <- read_csv("data/population_nd_gain.csv") %>% clean_names()
vulnerability_data <- read_csv("data/vulnerability_nd_gain.csv") %>% clean_names()
gdp_capita_data <- read_csv("data/gdp_nd_gain.csv") %>% clean_names()
vulnerability_data
View(vulnerability_data)
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
## Population data
head(population_data)
head(gdp_capita_data)
population_data_long <- population_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "population") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
gdp_capita_data_long <- gdp_capita_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "gdp_capita") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
population_data_wide <- population_data_long %>%
pivot_wider(names_from = year, values_from = population)
gdp_capita_data_wide <- gdp_capita_data_long %>%
pivot_wider(names_from = year, values_from = gdp_capita)
#########################
# Combining our data
#########################
## Combine culture and gdp data
culture_gdp_2020_data <- culture_data %>% select(-c(country)) %>%
left_join(subset(gdp_capita_data, select=c(iso_code, x2020)), by = c("iso_code"))
culture_gdp_2020_data <- culture_gdp_2020_data %>% select(iso_code, x2020, everything())
names(culture_gdp_2020_data)[names(culture_gdp_2020_data) == "x2020"] <- "gdp_capita_2020"
## Combine culture, gdp, and population data
culture_gdp_pop_2020_data <- culture_gdp_2020_data %>%
left_join(subset(population_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_2020_data)[names(culture_gdp_pop_2020_data) == "x2020"] <- "population_2020"
## Combine culture, gdp, population, and vulnerability data
culture_gdp_pop_vuln_2020_data <- culture_gdp_pop_2020_data %>%
left_join(subset(vulnerability_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_vuln_2020_data)[names(culture_gdp_pop_vuln_2020_data) == "x2020"] <- "vulnerability_2020"
View(pew_climate_data)
wvs_regions_data
culture_gdp_pop_vuln_2020_data
## Combine culture, gdp, population, vulnerability, wvs, and pew data
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>%
select(iso_code, wvs_region, x2020, everything())
all_2020_data
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code"))
## Combine culture, gdp, population, vulnerability, wvs, and pew data
all_2020_data
View(all_2020_data)
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>%
select(-c(country, year))
all_2020_data
na.omit(all_2020_data)
all_2020_data <- na.omit(all_2020_data)
co2_data
co2_data <- read_csv("data/owid_co2_data.csv") %>% clean_names()
co2_data
View(left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>%)
View(co2_data)
subset(co2_data, select=c(year, co2_per_capita), year==2021)
View(subset(co2_data, select=c(year, co2_per_capita), year==2021))
subset(co2_data, select=c(year, co2_per_capita))
co2_data[c(1,5),]
co2_data[,c(1,5)]
culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code"))
View(culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")))
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>%
select(-c(country, year))
View(all_2020_data)
culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code"))
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code"))
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>% select(-c(country, year))
View(all_2020_data)
all_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>% select(-c(country, year))
all_2020_data
View(all_2020_data)
culture_gdp_pop_vuln_co2_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything())
View(culture_gdp_pop_vuln_co2_2020_data)
culture_gdp_pop_vuln_2020_data
subset(co2_data[,c(1,3,5)], year==2020)
culture_data <- read_csv("data/culture.csv") %>% clean_names()
wvs_regions_data <- read_csv("data/wvs_regions.csv") %>% clean_names()
co2_data <- read_csv("data/owid_co2_data.csv") %>% clean_names()
pew_climate_data <- read_csv("data/pew_climate.csv") %>% clean_names()
population_data <- read_csv("data/population_nd_gain.csv") %>% clean_names()
vulnerability_data <- read_csv("data/vulnerability_nd_gain.csv") %>% clean_names()
gdp_capita_data <- read_csv("data/gdp_nd_gain.csv") %>% clean_names()
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
## Combine culture and gdp data
culture_gdp_2020_data <- culture_data %>% select(-c(country)) %>%
left_join(subset(gdp_capita_data, select=c(iso_code, x2020)), by = c("iso_code"))
culture_gdp_2020_data <- culture_gdp_2020_data %>% select(iso_code, x2020, everything())
names(culture_gdp_2020_data)[names(culture_gdp_2020_data) == "x2020"] <- "gdp_capita_2020"
## Combine culture, gdp, and population data
culture_gdp_pop_2020_data <- culture_gdp_2020_data %>%
left_join(subset(population_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_2020_data)[names(culture_gdp_pop_2020_data) == "x2020"] <- "population_2020"
## Combine culture, gdp, population, and vulnerability data
culture_gdp_pop_vuln_2020_data <- culture_gdp_pop_2020_data %>%
left_join(subset(vulnerability_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_vuln_2020_data)[names(culture_gdp_pop_vuln_2020_data) == "x2020"] <- "vulnerability_2020"
culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything())
co2_data[,c(1,3,5)]
subset(co2_data[,c(1,3,5)], year==2020)
View(culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")))
subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code"))
subset(co2_data[,c(1,3,5)], year==2020)
culture_gdp_pop_vuln_co2_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything())
View(culture_gdp_pop_vuln_co2_2020_data)
culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything())
View(culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything()))
culture_gdp_pop_vuln_2020_data
co2_data[,c(1,3,5)]
subset(co2_data[,c(1,3,5)], year==2020)
culture_gdp_pop_vuln_2020_data %>%
left_join(na.omit(subset(co2_data[,c(1,3,5)], year==2020)), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, co2_per_capita, everything())
View(culture_gdp_pop_vuln_2020_data)
culture_gdp_pop_vuln_2020_data %>%
left_join(na.omit(subset(co2_data[,c(1,3,5)], year==2020)), by = c("iso_code")) %>% select(-c(year)) %>%
select(iso_code, co2_per_capita, everything())
culture_gdp_pop_vuln_co2_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(na.omit(subset(co2_data[,c(1,3,5)], year==2020)), by = c("iso_code")) %>% select(-c(year)) %>%
select(iso_code, co2_per_capita, everything())
View(culture_gdp_pop_vuln_co2_2020_data)
culture_gdp_pop_vuln_co2_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(year)) %>%
select(iso_code, co2_per_capita, everything())
culture_gdp_pop_vuln_co2_2020_data
culture_gdp_pop_vuln_co2_2020_data <- na.omit(culture_gdp_pop_vuln_co2_2020_data)
## Combine culture, gdp, population, vulnerability, and wvs data
culture_gdp_pop_vuln_co2_wvs_2020_data <- culture_gdp_pop_vuln_co2_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>% select(-c(country, year))
culture_gdp_pop_vuln_co2_wvs_2020_data
View(culture_gdp_pop_vuln_co2_wvs_2020_data)
culture_gdp_pop_vuln_co2_wvs_2020_data <- culture_gdp_pop_vuln_co2_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code"))
culture_gdp_pop_vuln_co2_wvs_2020_data
culture_gdp_pop_vuln_co2_wvs_2020_data <- culture_gdp_pop_vuln_co2_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
select(iso_code, wvs_region, everything())
View(culture_gdp_pop_vuln_co2_wvs_2020_data)
all_2020_data <- culture_gdp_pop_vuln_co2_wvs_2020_data %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, everything())
all_2020_data
all_2020_data <- na.omit(all_2020_data)
View(all_2020_data)
View(culture_data)
View(all_2020_data)
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(all_data, x = "vulnerability_2020", y = "wellbeing_2020", color = "region"))
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(all_data, x = "vulnerability_2020", y = "wellbeing_2020", color = "region")
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(all_data, x = "vulnerability_2020", y = "wellbeing_2020")
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(all_data, x = "vulnerability_2020", y = "wellbeing_2020")
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(all_data, x = "vulnerability_2020", y = "wellbeing_2020")
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(na.omit(all_data), x = "vulnerability_2020", y = "wellbeing_2020")
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(na.omit(all_2020_data), x = "vulnerability_2020", y = "wellbeing_2020")
all_2020_data
## (2) Use plot to visualize the relationship between wellbeing and vulnerability
plot(na.omit(all_2020_data), x = "vulnerability_2020", y = "co2_per_capita")
plot(na.omit(all_2020_data), x = "vulnerability_2020", y = "co2_per_capita")
co2_per_capita
all_2020_data
# Libraries
pacman::p_load(tidyverse,
janitor,
countrycode,
DataExplorer)
##############################
# Quick exploratory analysis
##############################
introduce(all_2020_data)
create_report(all_2020_data)
plot_intro(all_2020_data)
plot_bar(all_2020_data)
plot_bar(all_2020_data, with = "wvs_region")
plot_bar(all_2020_data, with = "co2_per_capita")
plot_bar(all_2020_data, by = "wvs_region", with = "co2_per_capita")
plot_bar(all_2020_data, by = "wvs_region")
plot_bar(all_2020_data, with = "co2_per_capita")
plot_histogram(all_2020_data)
plot_density(diamonds)
plot_density(all_2020_data)
plot_correlation(all_2020_data)
# Libraries
pacman::p_load(tidyverse,
janitor,
countrycode,
DataExplorer)
culture_data <- read_csv("data/culture.csv") %>% clean_names()
wvs_regions_data <- read_csv("data/wvs_regions.csv") %>% clean_names()
co2_data <- read_csv("data/owid_co2_data.csv") %>% clean_names()
pew_climate_data <- read_csv("data/pew_climate.csv") %>% clean_names()
population_data <- read_csv("data/population_nd_gain.csv") %>% clean_names()
vulnerability_data <- read_csv("data/vulnerability_nd_gain.csv") %>% clean_names()
gdp_capita_data <- read_csv("data/gdp_nd_gain.csv") %>% clean_names()
View(culture_data)
#########################
# Add ISO CODE to data
#########################
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
View(wvs_regions_data)
View(pew_climate_data)
culture_data$iso_code <- countrycode(culture_data$country, origin = 'country.name', destination = 'iso3c')
wvs_regions_data$iso_code <- countrycode(wvs_regions_data$country, origin = 'country.name', destination = 'iso3c')
pew_climate_data$iso_code <- countrycode(pew_climate_data$country, origin = 'country.name', destination = 'iso3c')
names(population_data)[names(population_data) == "iso3"] <- "iso_code"
names(vulnerability_data)[names(vulnerability_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "iso3"] <- "iso_code"
names(gdp_capita_data)[names(gdp_capita_data) == "gdp"] <- "gdp_capita"
#########################
# Wide versus long data
#########################
## Population data
head(population_data)
head(gdp_capita_data)
population_data_long <- population_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "population") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
View(population_data_long)
gdp_capita_data_long <- gdp_capita_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "gdp_capita") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
View(gdp_capita_data_long)
population_data_wide <- population_data_long %>%
pivot_wider(names_from = year, values_from = population)
View(population_data_wide)
gdp_capita_data_wide <- gdp_capita_data_long %>%
pivot_wider(names_from = year, values_from = gdp_capita)
##################
# Combining data
##################
df_animals <- data.frame(numbers = c(1, 2, 3, 4), letters = c("a", "b", "c", "d"), animals = c("dog", "cat", "bird", "ape"))
df_colors <- data.frame(numbers = c(4, 5, 6, 7), letters = c("c", "d", "e", "f"), colors = c("black", "red", "blue", "green"))
## Row bind, column bind, bind rows, bind columns
df_animals_colors <- rbind(df_animals, df_colors)
df_animals_colors <- bind_rows(df_animals, df_colors)
df_animals_colors
df_animals_colors <- cbind(df_animals, df_colors)
df_animals_colors
df_animals_colors
df_animals_colors <- bind_cols(df_animals, df_colors)
df_animals_colors
## Join data
inner_join(df_animals, df_colors, by = "numbers")
full_join(df_animals, df_colors, by = "numbers")
left_join(df_animals, df_colors, by = "numbers")
right_join(df_animals, df_colors, by = "numbers")
semi_join(df_animals, df_colors, by = "numbers")
anti_join(df_animals, df_colors, by = "numbers")
anti_join(df_colors, df_animals, by = "numbers")
## Merge data
#In SQL database terminology, the
# Default: all = FALSE gives a natural join, a special case of an inner join.
# all.x = TRUE gives a left (outer) join,
# all.y = TRUE a right (outer) join,
# both (all = TRUE) a full join.
merge(df_animals, df_colors, by = "numbers", all = FALSE)
merge(df_animals, df_colors, by = "numbers", all.x = TRUE)
merge(df_animals, df_colors, by = "numbers", all.y = TRUE)
merge(df_animals, df_colors, by = "numbers", all = TRUE)
## How can we get GDP data for each country?
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population) %>%
select(-c(gdp_capita, population)) %>%
pivot_wider(names_from = year, values_from = gdp_per_capita)
population_data_long <- population_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "population") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
gdp_capita_data_long <- gdp_capita_data %>%
pivot_longer(cols = -c(iso_code, name), names_to = "year", values_to = "gdp_capita") %>%
mutate(year = as.numeric(substr(year, 2, 5)))
population_data_wide <- population_data_long %>%
pivot_wider(names_from = year, values_from = population)
gdp_capita_data_wide <- gdp_capita_data_long %>%
pivot_wider(names_from = year, values_from = gdp_capita)
## How can we get GDP data for each country?
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population) %>%
select(-c(gdp_capita, population)) %>%
pivot_wider(names_from = year, values_from = gdp_per_capita)
## How can we get GDP data for each country?
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population) %>%
select(-c(gdp_capita, population)) %>%
pivot_wider(names_from = year, values_from = gdp_capita)
## How can we get GDP data for each country?
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population) %>%
select(-c(population)) %>%
pivot_wider(names_from = year, values_from = gdp_capita)
gdp_per_capita_data
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population)
gdp_per_capita_data
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population) %>%
select(-c(population)) %>%
pivot_wider(names_from = year, values_from = gdp_capita)
gdp_per_capita_data
View(gdp_capita_data_long)
View(gdp_per_capita_data)
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population)
gdp_per_capita_data
View(gdp_capita_data_long)
View(population_data_long)
## How can we get GDP data for each country?
gdp_per_capita_data <- gdp_capita_data_long %>% select(-c(name)) %>%
left_join(population_data_long, by = c("iso_code", "year")) %>%
mutate(gdp = gdp_capita * population)
View(gdp_per_capita_data)
#########################
# Combining our data
#########################
## Combine culture and gdp data
culture_gdp_2020_data <- culture_data %>% select(-c(country)) %>%
left_join(subset(gdp_capita_data, select=c(iso_code, x2020)), by = c("iso_code"))
View(culture_gdp_2020_data)
culture_gdp_2020_data <- culture_gdp_2020_data %>% select(iso_code, x2020, everything())
names(culture_gdp_2020_data)[names(culture_gdp_2020_data) == "x2020"] <- "gdp_capita_2020"
## Combine culture, gdp, and population data
culture_gdp_pop_2020_data <- culture_gdp_2020_data %>%
left_join(subset(population_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_2020_data)[names(culture_gdp_pop_2020_data) == "x2020"] <- "population_2020"
View(culture_gdp_pop_2020_data)
## Combine culture, gdp, population, and vulnerability data
culture_gdp_pop_vuln_2020_data <- culture_gdp_pop_2020_data %>%
left_join(subset(vulnerability_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_vuln_2020_data)[names(culture_gdp_pop_vuln_2020_data) == "x2020"] <- "vulnerability_2020"
View(culture_gdp_pop_vuln_2020_data)
## Combine culture and gdp data
culture_gdp_2020_data <- culture_data %>% select(-c(country)) %>%
left_join(subset(gdp_capita_data, select=c(iso_code, x2020)), by = c("iso_code"))
culture_gdp_2020_data <- culture_gdp_2020_data %>% select(iso_code, x2020, everything())
names(culture_gdp_2020_data)[names(culture_gdp_2020_data) == "x2020"] <- "gdp_capita_2020"
## Combine culture, gdp, and population data
culture_gdp_pop_2020_data <- culture_gdp_2020_data %>%
left_join(subset(population_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_2020_data)[names(culture_gdp_pop_2020_data) == "x2020"] <- "population_2020"
## Combine culture, gdp, population, and vulnerability data
culture_gdp_pop_vuln_2020_data <- culture_gdp_pop_2020_data %>%
left_join(subset(vulnerability_data, select=c(iso_code, x2020)), by = c("iso_code")) %>%
select(iso_code, x2020, everything())
names(culture_gdp_pop_vuln_2020_data)[names(culture_gdp_pop_vuln_2020_data) == "x2020"] <- "vulnerability_2020"
## Combine culture, gdp, population, vulnerability, and co2 data
culture_gdp_pop_vuln_co2_2020_data <- culture_gdp_pop_vuln_2020_data %>%
left_join(subset(co2_data[,c(1,3,5)], year==2020), by = c("iso_code")) %>% select(-c(year)) %>%
select(iso_code, co2_per_capita, everything())
culture_gdp_pop_vuln_co2_2020_data <- na.omit(culture_gdp_pop_vuln_co2_2020_data)
## Combine culture, gdp, population, vulnerability, and wvs data
culture_gdp_pop_vuln_co2_wvs_2020_data <- culture_gdp_pop_vuln_co2_2020_data %>%
left_join(subset(wvs_regions_data, select=c(iso_code, wvs_region)), by = c("iso_code")) %>%
select(iso_code, wvs_region, everything())
# Combine culture, gdp, population, vulnerability, wvs, and pew data
all_2020_data <- culture_gdp_pop_vuln_co2_wvs_2020_data %>%
left_join(subset(pew_climate_data, year==2021), by = c("iso_code")) %>% select(-c(country, year)) %>%
select(iso_code, everything())
all_2020_data <- na.omit(all_2020_data)
View(all_2020_data)
all_2020_data <- na.omit(all_2020_data)
##############################
# Quick exploratory analysis
##############################
introduce(all_2020_data)
create_report(all_2020_data)
